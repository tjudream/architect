# Week10 课后作业
## 1. 根据微服务框架 Dubbo 的架构图，画出 Dubbo 进行一次微服务调用的时序图
![dubbo](dubbo.png)

时序图

![dubboseq](dubboseq.png)

## 2. 关于微服务架构（中台架构、领域驱动设计、组件设计原则），你有什么样的思考和认识？
### 微服务
为什么要用微服务？

微服务是为了解决什么问题的？

微服务是在什么情况下被提出的？

在早期互联网的应用基本上都是单体应用，目前复杂的互联网应用都是从单体应用一步步演化而来的。

随着业务规模的不断发展，单体应用会变得越来越庞大，逐渐变成了巨无霸应用。巨无霸应用编译、部署困难，代码分支管理困难，数据库连接
耗尽，新增业务困难。

于是将单体巨无霸应用拆分成若干个小应用的诉求越来越强烈。

微服务框架的需求：
* 失效转移
* 负载均衡
* 高效的远程通信
* 对应用最少侵入
* 版本管理
* 微服务网关

那么如何拆分应用呢？DDD 就是解决为了解决拆分问题。

### DDD 领域驱动设计
DDD 就是帮助架构师、产品经理、工程师、业务人员理清业务领域，划分子域，找到子域边界，识别实体、值对象等。

巨无霸应用主要是因为业务全部耦合在一起，所有业务都在一个单体应用中导致的。

按照业务划分领域、子域、子域的子域，在公司的组织架构层面每一个子域可以对应一个事业部，二级子域对应部门，单个应用或组件对应小组。

按照子域将公司的相关业务人员组织在一起。

划分好子域之间的界限上下文。

DDD的战略设计和战术设计
* 战略设计：领域、子域、界限上下文、上下文映射图
* 战术设计：实体、值对象、聚合、CQRS、事件溯源。

通过战略设计，划分模块和服务的边界及其依赖关系，对微服务架构的设计至关重要。

划分好子域之后，那么子域中的应用或者组件如何设计呢？

下面我们来看看组件的设计原则
### 组件设计原则
* 内聚原则
* 复用发布等同原则
* 共同封闭原则
* 共同复用原则
* 组件耦合原则
    * 无循环依赖
    * 稳定依赖
    * 稳定抽象

组件边界与依赖关系，不仅仅是技术问题，更是业务问题。

应用拆分、组件划分之后就会发现很多子域都有共用的组件或服务，比如基础服务相关的消息队列、数据库访问，业务相关的订单、收付款等。
这些公用的组件或者服务可以单独抽取出来，统一维护，然后提供给各个子域（业务线）使用。这就是中台。

### 中台架构
中台主要是将公用的业务层服务抽取出来单独管理，有专门的团队负责，独立发展，为其他业务线提供服务。

其他业务线可以基于中台快速地新增业务，提高研发交付效率。

